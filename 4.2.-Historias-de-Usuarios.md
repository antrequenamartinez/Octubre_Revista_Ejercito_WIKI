# Historias de Usuario

## HU.01 – Alta de Autor

**Como**: Editor
**Quiero**: registrar autores con sus datos, direcciones, documentos (DNI/CV) y datos bancarios
**Para**: poder gestionar sus artículos y envíos de cortesía de la revista

**Criterios de aceptación (DoD)**

* Se capturan datos personales, contacto y ≥1 dirección.
* Es **obligatorio** adjuntar **DNI** (1) y **CV** (1).
* Si el autor es **militar**, se registra el **perfil militar** completo.
* La cuenta bancaria solo es obligatoria si el autor es **remunerable**.
* El autor aparece en el **buscador** y puede asociarse a artículos.

---

## HU.02 – Alta de Artículo + subida de documentos

**Como**: Editor
**Quiero**: dar de alta artículos con 1..N autores, clasificación y cargar el cuerpo e imágenes
**Para**: iniciar el proceso de revisión

**DoD**

* Se registran: título, tipo, temática, sección, fecha de envío, observaciones.
* Se asocian **1..N autores** con **orden** de autoría.
* Se cargan **medidas**: palabras, caracteres, páginas (manual).
* Se sube **exactamente 1 cuerpo** (DOC/DOCX/PDF) y **0..N imágenes**.
* Se preserva **filename** y **content-type** en descargas inline.
* Estado inicial: **RECIBIDO**.
* El artículo es **consultable** y muestra sus ficheros.

---

## HU.03 – Cambiar estado de Artículo

**Como**: Editor
**Quiero**: cambiar el estado de un artículo durante su ciclo de vida
**Para**: mantener la trazabilidad del proceso editorial

**DoD**

* Flujo soportado: `RECIBIDO → EN_REVISION → EVALUADO → PROPUESTO → PUBLICADO/RECHAZADO/ARCHIVADO`.
* Transiciones **validadas** (p.ej., a EVALUADO requiere evaluaciones mínimas).
* Se bloquean transiciones **no permitidas** (ej. PUBLICADO no editable).

---

## HU.04 – Clasificar artículo (tipo/temática/sección)

**Como**: Editor
**Quiero**: mantener los atributos de clasificación del artículo
**Para**: facilitar búsquedas y preparar la maquetación de la revista

**DoD**

* Edición de **tipo**, **temática** y **sección**.
* La clasificación se refleja en filtros de búsqueda y en la propuesta de número.

---

## HU.05 – Alta de Consejero (siempre militar)

**Como**: Editor
**Quiero**: registrar consejeros con perfil militar
**Para**: disponer de revisores para la evaluación de artículos

**DoD**

* Datos personales y de contacto + **perfil militar obligatorio**.
* Los consejeros **no** tienen acceso a la plataforma.
* El consejero queda disponible para asignación en artículos.

---

## HU.06 – Asignar consejero(s) a Artículo

**Como**: Editor
**Quiero**: asignar 1..N consejeros a un artículo
**Para**: que realicen su evaluación formal

**DoD**

* Se puede asignar/desasignar consejeros a un artículo en **EN\_REVISION**.
* Al menos **1** consejero para permitir evaluación.
* El sistema evita duplicidades de asignación.

---

## HU.07 – Registrar evaluación (nota, recomendación e informe)

**Como**: Editor (en nombre del consejero)
**Quiero**: registrar la evaluación con **nota (1–6)**, **recomendación** y **adjuntar informe**
**Para**: decidir la publicación del artículo

**DoD**

* Nota **1..6**; recomendación en {NO\_DEBE, PUEDE, DEBE\_PUBLICAR}.
* Informe en PDF **opcional** (si no está, queda como **incompleta**).
* Al alcanzar el **mínimo** de evaluaciones configurado, el artículo pasa a **EVALUADO**.
* Historial de evaluaciones visible en el artículo.

---

## HU.08 – Crear número de revista

**Como**: Editor
**Quiero**: dar de alta un número de revista (nº, mes, año)
**Para**: organizar y consolidar artículos para su publicación

**DoD**

* Alta de `NumeroRevista` en estado **PLANIFICADO**.
* Se evita duplicidad nº + año.
* El número aparece en listados y es seleccionable en **propuesta** (HU.09).

---

## HU.09 – Asignar/retirar artículos a un número (propuesta)

**Como**: Editor
**Quiero**: añadir o quitar artículos a un número con orden
**Para**: construir la **propuesta** de número respetando la capacidad

**DoD**

* Solo artículos con **cuerpo** y estado **EVALUADO/PROPUESTO**.
* Se define **orden** y se **suman páginas** totales.
* El número pasa a **PROPUESTO** al guardar la asignación.
* Vista muestra listado con sección de cada artículo.

---

## HU.10 – Publicar número de revista

**Como**: Editor
**Quiero**: cambiar el estado del número a **PUBLICADO**
**Para**: habilitar la distribución y generación de etiquetas

**DoD**

* Requiere **propuesta válida** sin exceder capacidad.
* Al publicar, las asignaciones quedan **congeladas** (solo lectura).
* El número queda disponible con estado.

---

## HU.11 – Búsqueda avanzada (artículos/autores/documentos)

**Como**: Editor / Consulta
**Quiero**: realizar búsquedas con múltiples filtros y descargar documentos
**Para**: acceder rápidamente a la información requerida

**DoD**

* Filtros por título, autor, estado, temática, sección, fechas, etc.
* Resultados paginados con **descargas** online de documentos permitidos.

---

## HU.12 – Etiqueta de envío a Autor (ejemplar publicado)

**Como**: Editor
**Quiero**: generar etiquetas postales para autores de artículos **PUBLICADOS**
**Para**: enviar un ejemplar físico de cortesía

**DoD**

* Selección de artículo publicado y **autor** destinatario.
* Selección de **dirección** válida del autor.
* Generación de etiqueta en **PDF/XLS** con formato estándar.
* Archivo descargable para impresión.

---

## HU.13 – Alta de Suscriptor y Suscripción

**Como**: Distribuidor
**Quiero**: registrar suscriptores y crear sus suscripciones
**Para**: habilitar el envío físico de revistas

**DoD**

* Alta de **Suscriptor** (persona/unidad/librería/organización, etc), con **código de suscriptor**.
* Registro de **Suscripción** con **estado**, **copias**, **forma de pago**, **periodo** y **dirección de entrega**.
* Posibilidad de **perfil militar** si aplica.
* Aparece en listados.

---

## HU.14 – Gestionar Pagador (distinto del suscriptor)

**Como**: Distribuidor
**Quiero**: dar de alta/editar el **Pagador** y su cuenta bancaria
**Para**: gestionar cobros cuando el pagador no es el suscriptor

**DoD**

* Alta/selección de **Pagador** (puede coincidir con el suscriptor).
* Registro de **cuenta bancaria (IBAN)** y dirección (si aplica).
* La suscripción refleja el **pagador actual**.
* Acceso a datos bancarios restringido por rol.

---

## HU.15 – Modificar Suscripción (datos y estados)

**Como**: Distribuidor
**Quiero**: actualizar datos y estado de suscripciones
**Para**: mantenerlas al día y parar envíos si corresponde

**DoD**

* Estados manejados: **ACTIVA / SUSPENDIDA / CANCELADA / VENCIDA**.
* **SUSPENDIDA/VENCIDA** implica **copias = 0** para envíos y facturación.
* Permite cambiar dirección de entrega, pagador, copias y forma de pago.

---

## HU.16 – Generar etiquetas de envío (número PUBLICADO)

**Como**: Distribuidor
**Quiero**: generar etiquetas por **Número de Revista PUBLICADO**
**Para**: preparar los lotes de envío postal

**DoD**

* Filtro por **Número PUBLICADO**.
* Recupera suscripciones **ACTIVAS** y expande por **copias**.
* Permite elegir **dirección de entrega** por suscriptor.
* Genera lote listo para **exportación** (PDF/XLS).

---

## HU.17 – Exportar etiquetas (PDF/XLS)

**Como**: Distribuidor
**Quiero**: exportar etiquetas a **PDF** (impresión) o **XLS/CSV** (manipulado)
**Para**: poder imprimir o enviar a proveedor logístico

**DoD**

* Exportación en **PDF** (maquetado) y **XLS/CSV** (datos tabulares).
* Opcional: exportar por **bloques** (país/provincia).

---

## HU.18 – Consulta de suscriptores/suscripciones/direcciones

**Como**: Distribuidor / Consulta
**Quiero**: buscar y consultar suscriptores, suscripciones y direcciones
**Para**: verificar datos y resolver incidencias

**DoD**

* Búsqueda por nombre/código/estado/país/provincia, etc.
* Vista de detalle con histórico, direcciones y copias.
* (Opcional) Exportar CSV/XLS en perfiles autorizados.
* Acceso **solo lectura** para Consulta; **auditado**.

---

## HU.19 – Generar Certificado de Pago a Autor

**Como**: Editor / Dirección  
**Quiero**: generar un certificado de pago para los autores con artículos publicados  
**Para**: remunerarles con la cantidad correspondiente e incluir la retención aplicable

**DoD**

- Se selecciona un **artículo publicado** y sus autores asociados.  
- Se registra la **cantidad a pagar** por autor (puede ser variable según calidad).  
- Se aplica y muestra la **retención correspondiente** (IRPF u otra definida).  
- Se genera un **certificado en PDF/XLS** con los datos del autor, artículo, importe y retención.  

---

## HU.20 – Exportar Certificado de Pago

**Como**: Dirección
**Quiero**: exportar el certificado de pago generado a **PDF/XLS**
**Para**: archivarlo y remitirlo a contabilidad

**DoD**

* Entrada: certificado previamente **generado** (HU.19).
* Exportación en **PDF** (maquetado) y **XLS/CSV** (datos tabulares).


---

## HU.21 – Monitorizar números de revista (estado y capacidad)

**Como**: Dirección
**Quiero**: consultar el estado de los **números de revista** y su **capacidad** (páginas acumuladas)
**Para**: monitorizar el avance editorial y detectar cuellos de botella

**DoD**

* Listado por **año/mes/nº** con estado: **PLANIFICADO / PROPUESTO / PUBLICADO / ARCHIVADO**.
* Visualización de **páginas totales** vs **capacidad** configurada.
* Filtros por estado, periodo y sección.
* Enlace a detalle del número (artículos asignados y orden).

---

## HU.22 – Histórico y observaciones de artículos

**Como**: Dirección
**Quiero**: ver el **histórico** de cambios y las **observaciones** de cada artículo
**Para**: garantizar trazabilidad del proceso editorial

**DoD**

* Línea temporal con estados, fechas y usuario que realizó el cambio.
* Observaciones editoriales visibles con **timestamp** y autor de la nota.
* Descarga de versiones de manuscritos (si el perfil lo permite).
* Eventos clave marcados: recepción, asignación, evaluaciones, propuesta, publicación.

---

## HU.23 – Búsqueda de artículos (Dirección)

**Como**: Dirección
**Quiero**: buscar artículos por **título, autor, estado, temática, sección y fechas**
**Para**: acceder rápidamente a la información requerida

**DoD**

* Búsqueda combinando **múltiples filtros** y texto libre.
* Resultados **paginados** con columnas configurables.
* Acceso directo a detalle de artículo y descarga de documentos permitidos.
* Posibilidad de **exportar** resultados (XLS/CSV) si el perfil lo autoriza.

---

## HU.24 – Búsqueda de autores (Dirección)

**Como**: Dirección
**Quiero**: buscar autores por **nombre, unidad/perfil militar, producción**
**Para**: analizar contribuciones y localizar datos de contacto

**DoD**

* Filtros por nombre, email, perfil militar, nº de artículos, estado de publicaciones.
* Acceso a ficha de autor y a su lista de artículos.
* Exportación **XLS/CSV** bajo permisos.

---

## HU.25 – Búsqueda de números de revista (Dirección)

**Como**: Dirección
**Quiero**: localizar **números** por **año/mes/nº, estado y secciones**
**Para**: disponer de información consolidada de planificación y publicación

**DoD**

* Filtros combinables + texto libre.
* Vista de resumen con estado y **porcentaje de capacidad ocupada**.
* Acceso a detalle del número y a los artículos asignados.

---

## HU.26 – Informes y estadísticas (panel)

**Como**: Dirección
**Quiero**: ver un **panel** con indicadores de artículos, evaluaciones, tiempos y suscripciones
**Para**: tomar decisiones basadas en datos

**DoD**

* KPIs mínimos:

  * Tiempo medio por fase (**recepción→evaluación→propuesta→publicación**).
  * Nº artículos por estado y por temática.
  * Nº evaluaciones pendientes / fuera de plazo.
  * Suscripciones activas/suspendidas/vencidas y **ejemplares** por lote.
* Filtros por periodo y exportación a **PDF** (captura del panel).

---

## HU.27 – Exportación de listados (autorizados)

**Como**: Dirección
**Quiero**: exportar listados de **artículos, autores y números**
**Para**: compartir y analizar la información fuera del sistema

**DoD**

* Exportación **XLS/CSV** de resultados con columnas visibles.
* Sólo perfiles con permiso; registro de **auditoría**.
* Límite de filas configurable y **paginación** en servidor.

---

## HU.28 – Alta de Usuario (Administración)

**Como**: Administrador
**Quiero**: dar de alta usuarios en la aplicación
**Para**: habilitar su acceso (vía infraestructura DICODEF)

**DoD**

* Formulario con datos mínimos: nombre, email institucional, **identificador DICODEF**.
* Validaciones de unicidad por email/identificador.
* Estado inicial **ALTA**; sin gestión de recuperación de credenciales (externo a la app).
* Registro en **auditoría** (quién dio de alta, cuándo).

---

## HU.29 – Asignar roles a usuario

**Como**: Administrador
**Quiero**: asignar **uno o varios roles** (Autor, Consejero, Redactor, Distribuidor, Dirección)
**Para**: definir permisos de uso en la aplicación

**DoD**

* Selección múltiple de roles, con **vigencia** opcional (desde/hasta).
* Cambio de roles refleja permisos en la siguiente sesión del usuario.
* Auditoría de cambios: antes/después, usuario admin y fecha.

---

## HU.30 – Editar usuario

**Como**: Administrador
**Quiero**: editar los datos básicos y estado del usuario
**Para**: mantener actualizada su información

**DoD**

* Editables: nombre, email institucional, estado (**ALTA / BAJA**), observaciones.
* No se gestiona contraseña (dependencia DICODEF).
* Auditoría de edición.

---

## HU.31 – Desactivar usuario (baja)

**Como**: Administrador
**Quiero**: **desactivar** a un usuario (BAJA)
**Para**: revocar su acceso a la aplicación

**DoD**

* Cambio de estado **ALTA → BAJA** con motivo.
* Efecto inmediato: bloqueo de acceso a funcionalidades.
* Historial de accesos conserva trazabilidad; no se eliminan datos.

---

## HU.32 – Consulta de usuarios y roles

**Como**: Administrador
**Quiero**: consultar el listado de usuarios y sus **roles**
**Para**: auditar permisos y altas/bajas

**DoD**

* Filtros por rol, estado y texto libre.
* Vista de detalle con **roles**.

---
